.content-wrapper
  .container
    / Content Header (Page header)
    %section.content-header
      = render 'shared/flash_messages'
      %h1
        %i.fa.fa-user
        Users
        %small= link_to 'New', new_users_admin_path, class: 'btn bg-orange'

    / Main content
    %section.content
      / Default box
      .box.box-primary
        .box-header.with-border
          %h3.box-title 
            - if current_user.super?
              = form_tag users_admin_index_path, :method => 'get', :class => "form-inline" do
                = select_tag :company_id, options_for_select(Company.all.map{|c| [c.CompanyName, c.id]}, params[:company_id]), prompt: 'All companies', class: "form-control"
                &nbsp;
                = select_tag :role, options_for_select([["Admin",'admin'], ["Basic",'basic'], ["Collaborator",'collaborator']], params[:role]), prompt: 'All ', class: "form-control"
                &nbsp;
                = search_field_tag :q, params[:q], :placeholder => "Search", class: "form-control"
                &nbsp;
                = button_tag(:type => 'submit', :class => 'btn btn-primary', data: {disable_with: "<i class='fa fa-spinner fa-spin'></i>"}) do
                  %i.fa.fa-search
        .box-body.no-padding
          %table.table.table-condensed
            %thead
              %tr
                %th{:scope => "col"} #
                %th{:scope => "col"} First
                %th{:scope => "col"} Last
                %th{:scope => "col"} Role
                %th{:scope => "col"} Phone
                %th{:scope => "col"} Email
                - if current_user.super?
                  %th{:scope => "col"} Company
                %th
            %tbody
              - @users.each do |user|
                %tr
                  %th{:scope => "row"}= user.id
                  %td= user.first_name
                  %td= user.last_name
                  %td= user.role.humanize
                  %td= user.phone
                  %td= user.email
                  - if current_user.super?
                    %td= user.company.CompanyName
                  %td
                    = link_to 'Show', users_admin_path(user), class: 'btn btn-default btn-sm'
                    = link_to 'Edit', edit_users_admin_path(user), class: 'btn btn-primary btn-sm'
        .box-footer
          .pull-right= paginate @users
    -#
      / Main content
      %section.content
        / Default box
        .box.box-primary
          .box-header.with-border
            %h3.box-title 
              Admin
            .box-tools.pull-right
              %button.btn.btn-box-tool{"data-toggle" => "tooltip", "data-widget" => "collapse", :title => "Collapse", :type => "button"}
                %i.fa.fa-minus
              %button.btn.btn-box-tool{"data-toggle" => "tooltip", "data-widget" => "remove", :title => "Remove", :type => "button"}
                %i.fa.fa-times
          .box-body.no-padding
            %table.table.table-condensed
              %thead
                %tr
                  %th{:scope => "col"} #
                  %th{:scope => "col"} First
                  %th{:scope => "col"} Last
                  %th{:scope => "col"} Phone
                  %th{:scope => "col"} Email
                  %th
              %tbody
                - @admin_users.each do |admin_user|
                  %tr
                    %th{:scope => "row"}= admin_user.id
                    %td= admin_user.first_name
                    %td= admin_user.last_name
                    %td= admin_user.phone
                    %td= admin_user.email
                    %td= link_to 'More', users_admin_path(admin_user), class: 'btn btn-primary btn-sm'

        .box.box-primary
          .box-header.with-border
            %h3.box-title 
              Basic
            .box-tools.pull-right
              %button.btn.btn-box-tool{"data-toggle" => "tooltip", "data-widget" => "collapse", :title => "Collapse", :type => "button"}
                %i.fa.fa-minus
              %button.btn.btn-box-tool{"data-toggle" => "tooltip", "data-widget" => "remove", :title => "Remove", :type => "button"}
                %i.fa.fa-times
          .box-body.no-padding
            %table.table.table-condensed
              %thead
                %tr
                  %th{:scope => "col"} #
                  %th{:scope => "col"} First
                  %th{:scope => "col"} Last
                  %th{:scope => "col"} Phone
                  %th{:scope => "col"} Email
                  %th
              %tbody
                - @basic_users.each do |basic_user|
                  %tr
                    %th{:scope => "row"}= basic_user.id
                    %td= basic_user.first_name
                    %td= basic_user.last_name
                    %td= basic_user.phone
                    %td= basic_user.email
                    %td= link_to 'More', users_admin_path(basic_user), class: 'btn btn-primary btn-sm'

        .box.box-primary
          .box-header.with-border
            %h3.box-title 
              Payee
            .box-tools.pull-right
              %button.btn.btn-box-tool{"data-toggle" => "tooltip", "data-widget" => "collapse", :title => "Collapse", :type => "button"}
                %i.fa.fa-minus
              %button.btn.btn-box-tool{"data-toggle" => "tooltip", "data-widget" => "remove", :title => "Remove", :type => "button"}
                %i.fa.fa-times
          .box-body.no-padding
            %table.table.table-condensed
              %thead
                %tr
                  %th{:scope => "col"} #
                  %th{:scope => "col"} First
                  %th{:scope => "col"} Last
                  %th{:scope => "col"} Phone
                  %th{:scope => "col"} Email
                  %th
              %tbody
                - @payee_users.each do |payee_user|
                  %tr
                    %th{:scope => "row"}= payee_user.id
                    %td= payee_user.first_name
                    %td= payee_user.last_name
                    %td= payee_user.phone
                    %td= payee_user.email
                    %td= link_to 'More', users_admin_path(payee_user), class: 'btn btn-primary btn-sm'