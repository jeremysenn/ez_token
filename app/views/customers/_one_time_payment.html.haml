#one_time_payment.modal.fade
  .modal-dialog.modal-sm
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} Ã—
      .modal-body
        =# form_tag one_time_payment_customer_path(@customer), id: 'one_time_payment_form', method: 'get', class: 'form-horizontal' do |f|
        = form_tag one_time_payment_account_path(@account), id: 'one_time_payment_form', method: 'get', class: 'form-horizontal' do |f|
          = hidden_field_tag :to_customer_id, @customer.id
          .input-group.mb-3
            .input-group-prepend
              %span.input-group-text $
            =# number_field_tag :amount, nil, :placeholder => "Amount", class: "form-control input-lg", required: true, step: '1', autofocus: true, :inputmode => "numeric", :min => "0", :pattern => "[0-9]*"
            = text_field_tag :payment_amount, nil, :placeholder => "Amount", class: "form-control input-lg", required: true, autofocus: true, :pattern => "[0-9]*"
            .input-group-append
              %span.input-group-text .00
          .form-group
            = text_field_tag :receipt_number, nil, :placeholder => "Reference Number", class: "form-control input-lg", style: "width: 100%;"
          - if current_user.collaborator?
            - if current_user.admin_events.count > 1
              .form-group
                = select_tag :event_id, options_from_collection_for_select(current_user.admin_events, "id", "title"), class: "form-control input-lg"
            - elsif current_user.admin_events.count == 1
              = hidden_field_tag :event_id, current_user.admin_events.first.id
          .form-group
            = text_area_tag :note, nil, :placeholder => "Note", class: "form-control input-lg", style: "width: 100%;"

          .modal-footer
            -# %button.btn.btn-default{"data-dismiss" => "modal", :type => "button"} Cancel
            -#
              %button.btn.btn-secondary{id: 'one_time_payment_pay_and_print_button', name: "pay_and_print", :type => "submit", data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Pay & Print"}} 
                %i.fa.fa-print
                Pay & Print
            %button.btn.btn-default{id: 'one_time_payment_pay_button', name: "pay", :type => "submit", data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Pay"}} 
              %i.fa.fa-dollar
              Pay
            %button.btn.btn-default{id: 'one_time_payment_pay_and_text_button', name: "pay_and_text", :type => "submit", data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Pay & Text"}} 
              %i.fa.fa-comment
              Pay & Text

:javascript
  $('.modal').on('shown.bs.modal', function() {
    $(this).find('[autofocus]').first().focus();
  });

  $('#one_time_payment_pay_and_print_button').click(function() {
    var payment_amount = $('#payment_amount').val();
    if (payment_amount > 0) {
      $('#one_time_payment_pay_and_text_button').hide();
      var url = "#{barcode_customer_url(@customer.id)}";
      window.open(url, '_blank');
      }
    else {
      alert('Please enter amount');
    }
  });

  $('#one_time_payment_pay_and_text_button').click(function() {
    var payment_amount = $('#payment_amount').val();
    if (payment_amount > 0) {
      $('#one_time_payment_pay_and_print_button').hide();
      $('#one_time_payment_pay_button').hide();
      }
    else {
      alert('Please enter amount');
    }
  });

  $('#one_time_payment_pay_button').click(function() {
    var payment_amount = $('#payment_amount').val();
    if (payment_amount > 0) {
      $('#one_time_payment_pay_and_text_button').hide();
      }
    else {
      alert('Please enter amount');
    }
  });