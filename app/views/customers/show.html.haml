.content-wrapper
  .container
    / Content Header (Page header)
    %section.content-header
      %h1
        %i.fa.fa-male
        Employee Profile
    / Main content
    %section.content
      / Default box
      .row
        .col-md-3
          / Profile Image
          .box.box-primary
            .box-body.box-profile
              -#
                %img.profile-user-img.img-responsive.img-circle{:alt => "User profile picture", :src => "../../dist/img/user4-128x128.jpg"}/
              %h3.profile-username.text-center= @employee.full_name
              %p.text-muted.text-center
                = "Created #{@employee.CreateDate.strftime('%-m/%-d/%Y')}"
                %br
                Balance
                = number_to_currency(@account.balance)
                
              %ul.list-group.list-group-unbordered
                %li.list-group-item
                  %b Payments
                  %a.pull-right= "#{@payment_transactions.blank? ? 0 : @payment_transactions.count}"
                %li.list-group-item
                  %b Withdrawals
                  %a.pull-right= "#{@withdrawal_transactions.blank? ? 0 : @withdrawal_transactions.count}"
                %li.list-group-item
                  %b Messages
                  %a.pull-right= "#{@messages.blank? ? 0 : @messages.count}"
              - if current_user.admin?
                %a.btn.btn-success.btn-block{href: '#', "data-toggle" => "modal", "data-target" => "#one_time_payment"}
                  %b 
                    %i.fa.fa-dollar
                    One Time Payment
                %a.btn.bg-orange.btn-block{:href => "#"}
                  %b 
                    %i.fa.fa-comment
                    Send Message
                = render 'one_time_payment'
              - if current_user.employee? and @account.balance > 0
                %a.btn.btn-success.btn-block{href: '#', "data-toggle" => "modal", "data-target" => "#barcode"}
                  %b 
                    %i.fa.fa-dollar
                    Get Paid at ATM!
                = render 'barcode'
            / /.box-body
          / /.box
          / Details Box
          .box.box-primary
            .box-header.with-border
              %h3.box-title Details
            / /.box-header
            .box-body
              %strong
                %i.fa.fa-envelope.margin-r-5
                Email
              %p.text-muted
                - unless @employee.email.blank?
                  - if current_user.admin?
                    = mail_to(@employee.email)
                  - else
                    = @employee.email
                - else
                  None
              %hr/
              %strong
                %i.fa.fa-mobile.margin-r-5
                Phone
              %p.text-muted
                - unless @employee.phone.blank?
                  - if current_user.admin?
                    %a{href: "tel:#{@employee.phone}"}
                      = @employee.phone
                  - else
                    = @employee.phone
                - else
                  None
              %hr/
              %strong
                %i.fa.fa-file-text-o.margin-r-5
                Notes
              %p Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam fermentum enim neque.
            / /.box-body
          / /.box
        .col-md-9
          .box.box-primary
            .box-body
              %ul#myTab.nav.nav-tabs{:role => "tablist"}
                %li.nav-item
                  %a#payments-tab.nav-link.active{"aria-controls" => "payments", "aria-selected" => "true", "data-toggle" => "tab", :href => "#payments", :role => "tab"} Payments
                %li.nav-item
                  %a#withdrawals-tab.nav-link{"aria-controls" => "withdrawals", "aria-selected" => "false", "data-toggle" => "tab", :href => "#withdrawals", :role => "tab"} Withdrawals
                %li.nav-item
                  %a#messages-tab.nav-link{"aria-controls" => "messages", "aria-selected" => "false", "data-toggle" => "tab", :href => "#messages", :role => "tab"} Messages
              #myTabContent.tab-content
                #payments.tab-pane.fade.show.active{"aria-labelledby" => "home-tab", :role => "tabpanel"}
                  - unless @payment_transactions.blank?
                    .table-responsive
                      %table.table.table-striped{class: "#{browser.device.mobile? ? 'table-sm' : ''}"}
                        %thead
                          %tr
                            %th ID
                            %th Date/Time
                            %th Code
                            %th Status
                            %th Requested
                            %th Authorized
                            %th Description
                            %th
                        %tbody
                          - @payment_transactions.each do |payment_transaction|
                            %tr
                              %td= payment_transaction.id
                              %td= payment_transaction.date_time.strftime("%-m/%-d/%y %l:%M %p")
                              %td= payment_transaction.error_code_description
                              %td= payment_transaction.status_description
                              %td= number_to_currency(payment_transaction.amt_req)
                              %td= number_to_currency(payment_transaction.amt_auth)
                              %td= payment_transaction.Description
                              %td= link_to "Show", payment_transaction, class: 'btn btn-primary'
                  - else
                    %p.text-center None

                #withdrawals.tab-pane.fade{"aria-labelledby" => "profile-tab", :role => "tabpanel"}
                  - unless @withdrawal_transactions.blank?
                    .table-responsive
                      %table.table.table-striped{class: "#{browser.device.mobile? ? 'table-sm' : ''}"}
                        %thead
                          %tr
                            %th ID
                            %th Date/Time
                            %th Code
                            %th Status
                            %th Requested
                            %th Authorized
                            %th Description
                            %th
                        %tbody
                          - @withdrawal_transactions.each do |withdrawal_transaction|
                            %tr
                              %td= withdrawal_transaction.id
                              %td= withdrawal_transaction.date_time.strftime("%-m/%-d/%y %l:%M %p")
                              %td= withdrawal_transaction.error_code_description
                              %td= withdrawal_transaction.status_description
                              %td= number_to_currency(withdrawal_transaction.amt_req)
                              %td= number_to_currency(withdrawal_transaction.amt_auth)
                              %td= withdrawal_transaction.Description
                              %td= link_to "Show", withdrawal_transaction, class: 'btn btn-primary'
                  - else
                    %p.text-center None 

                #messages.tab-pane.fade{"aria-labelledby" => "contact-tab", :role => "tabpanel"}
                  %p.text-center Messages