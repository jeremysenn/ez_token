-# %nav.navbar.navbar-expand-lg.fixed-top.navbar-light.bg-light
%nav.navbar.navbar-expand-lg.navbar-light.bg-light
  %a.navbar-brand{:href => root_path} 
    = image_tag(image_path("tranact_logo_50.png"))
  %button.navbar-toggler{"aria-controls" => "navbarSupportedContent", "aria-expanded" => "false", "aria-label" => "Toggle navigation", "data-target" => "#navbarSupportedContent", "data-toggle" => "collapse", :type => "button"}
    %span.navbar-toggler-icon
  #navbarSupportedContent.collapse.navbar-collapse
    %ul.navbar-nav.mr-auto
      %li.nav-item.bordered
        .text-center
          %a.nav-link{:href => root_path, :class => (current_page? root_path) ? "text-light-blue" : ""}
            %i.fa.fa-dashboard.fa-lg
            %br
            Home
      -#
        %li.nav-item.bordered
          .text-center
            %a.nav-link{:href => events_path, :class => (params[:controller] == 'events') ?  "text-light-blue" : ""}
              %i.fa.fa-calendar.fa-lg
              %br
              Events
      - if current_user.can_view_events?
        %li.nav-item.bordered.dropdown
          %a.nav-link{ "data-toggle" => "dropdown", :href => "#", :class => (params[:controller] == 'events') ?  "text-light-blue" : ""}
            .text-center
              %i.fa.fa-calendar.fa-lg
              %br
              Events
          .dropdown-menu{"aria-labelledby" => "navbarDropdown"}
            %a.dropdown-item{:href => events_path, :class => (params[:controller] == 'events' and params[:action] == 'index') ?  "active" : ""} All Events
            - if current_user.can_edit_events?
              %a.dropdown-item{:href => new_event_path, :class => (params[:controller] == 'events' and params[:action] == 'new') ?  "active" : ""} New Event
      -#
        %li.nav-item.bordered
          .text-center
            %a.nav-link{:href => customers_path, :class => (params[:controller] == 'customers') ?  "text-light-blue" : ""}
              %i.fa.fa-male.fa-lg
              %br
              Accounts
      -#
        %li.nav-item.bordered.dropdown
          %a.nav-link{ "data-toggle" => "dropdown", :href => "#", :class => (params[:controller] == 'customers') ?  "text-light-blue" : ""}
            .text-center
              %i.fa.fa-male.fa-lg
              %br
              Accounts
          .dropdown-menu{"aria-labelledby" => "navbarDropdown"}
            %a.dropdown-item{:href => customers_path, :class => (params[:controller] == 'customers' and params[:action] == 'index') ?  "active" : ""} All Accounts
            %a.dropdown-item{:href => new_customer_path, :class => (params[:controller] == 'customers' and params[:action] == 'new') ?  "active" : ""} New Account
      - if current_user.can_view_accounts?
        %li.nav-item.bordered.dropdown
          %a.nav-link{ "data-toggle" => "dropdown", :href => "#", :class => (params[:controller] == 'customers' or params[:controller] == 'accounts') ?  "text-light-blue" : ""}
            .text-center
              %i.fa.fa-male.fa-lg
              %br
              Accounts
          .dropdown-menu{"aria-labelledby" => "navbarDropdown"}
            %a.dropdown-item{:href => accounts_path, :class => (params[:controller] == 'accounts' and params[:action] == 'index') ?  "active" : ""} All Accounts
            - if current_user.can_edit_accounts?
              %a.dropdown-item{:href => new_customer_path, :class => (params[:controller] == 'customers' and params[:action] == 'new') ?  "active" : ""} New Account
      -#
        %li.nav-item.bordered
          .text-center
            %a.nav-link{:href => accounts_path, :class => (params[:controller] == 'accounts') ?  "text-light-blue" : ""}
              %i.fa.fa-google-wallet.fa-lg
              %br
              Wallets
      - if current_user.can_view_wallet_types?
        %li.nav-item.bordered.dropdown
          %a.nav-link{ "data-toggle" => "dropdown", :href => "#", :class => (params[:controller] == 'account_types') ?  "text-light-blue" : ""}
            .text-center
              %i.fa.fa-google-wallet.fa-lg
              %br
              Wallets
          .dropdown-menu{"aria-labelledby" => "navbarDropdown"}
            %a.dropdown-item{:href => account_types_path, :class => (params[:controller] == 'account_types' and params[:action] == 'index') ?  "active" : ""} Wallet Types
            - if current_user.can_edit_wallet_types?
              %a.dropdown-item{:href => new_account_type_path, :class => (params[:controller] == 'account_types' and params[:action] == 'new') ?  "active" : ""} New Wallet Type

      -#
        %li.nav-item.bordered
          .text-center
            %a.nav-link{:href => payment_batches_path, :class => (params[:controller] == 'payment_batches') ?  "text-light-blue" : ""}
              %i.fa.fa-dollar.fa-lg
              %br
              Transfer
      - if current_user.can_view_atms?
        %li.nav-item.bordered
          .text-center
            %a.nav-link{:href => transactions_path, :class => (params[:controller] == 'transactions') ?  "text-light-blue" : ""}
              %i.fa.fa-bolt.fa-lg
              %br
              Transactions
      
      -#
        %li.nav-item.bordered
          .text-center
            %a.nav-link{:href => cards_path, :class => (params[:controller] == 'cards') ?  "text-light-blue" : ""}
              %i.fa.fa-qrcode.fa-lg
              %br
              Barcodes
    %form.form-inline.my-2.my-lg-0
      .my-2.my-sm-0.dropdown
        %a#navbarDropdown.nav-link.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :href => "#", :role => "button"}
          %i.fa.fa-user
          = current_user.full_name
        .dropdown-menu{"aria-labelledby" => "navbarDropdown"}
          %a.dropdown-item{:href => "#"}
            %i.fa.fa-building
            = current_user.company.name
            %br
            %small= "(#{current_user.role.humanize})"
          %a.dropdown-item{:href => edit_user_registration_path(current_user)} 
            %i.fa.fa-edit
            Edit profile
          .dropdown-divider
          - if current_user.can_view_users?
            %a.dropdown-item{:href => users_admin_index_path, :class => (params[:controller] == 'users') ?  "active" : ""} 
              %i.fa.fa-users
              Users
          -#
            %a.dropdown-item{:href => transactions_path, :class => (params[:controller] == 'transactions') ?  "text-light-blue" : ""}
              %i.fa.fa-bolt
              Transactions
          - if current_user.can_view_atms?
            %a.dropdown-item{:href => devices_path, :class => (params[:controller] == 'devices') ?  "active" : ""}
              %i.fa.fa-money
              ATMs
          %a.dropdown-item{:href => sms_messages_path, :class => (params[:controller] == 'sms_messages') ?  "active" : ""}
            %i.fa.fa-commenting
            Messages
      .my-2.my-sm-0= link_to 'Log out', destroy_user_session_path, method: :delete, data: { confirm: 'Are you sure you want to sign out?' }, class: 'btn btn-outline-danger'